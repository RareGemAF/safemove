doctype html
html(lang="en")
  head
    meta(charset='UTF-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    title SafeMove - Driver Dashboard
    link(rel='stylesheet' href='/css/driver.css')
    link(rel='stylesheet' href='https://unpkg.com/leaflet@1.7.1/dist/leaflet.css')
    script(src='https://cdn.jsdelivr.net/npm/chart.js')
    script(src='https://unpkg.com/leaflet@1.7.1/dist/leaflet.js')
  body
    // Mobile Menu Toggle
    .mobile-menu-toggle(onclick='toggleMobileMenu()')
      span
      span
      span

    // Navbar
    nav.navbar
      .logo
        img.logo-img(src='/images/image.png' alt='SafeMove Logo')
        span(data-i18n="safemove_driver") SafeMove Driver
      .navbar-controls
        .language-selector
          select#languageSelect(onchange='changeLanguage(this.value)')
            option(value='en') English
            option(value='lg') Luganda
            option(value='sw') Kiswahili
            option(value='tt') Rutooro
            option(value='ny') Runyakore
        .user-section
          .user-info
            .user-name(data-i18n="welcome") Welcome, #{user.name}
            .user-status
              span#driverTrustBadge.trust-badge(data-i18n="gold_driver") Gold Driver
          .safety-status
            span#safetyModeStatus(data-i18n="safety_mode_inactive") Safety Mode: Inactive
          button.logout-btn(onclick='logout()' data-i18n="logout") Logout

    // Sidebar
    aside.sidebar
      .sidebar-header
        h3(data-i18n="safemove_driver") SafeMove Driver
        .driver-status
          span.status-online#driverStatus(data-i18n="online") Online
          span.status-text#statusText(data-i18n="available_for_rides") Available for rides
      ul.sidebar-menu
        li
          a.sidebar-link.active(href='#dashboard' onclick="showSection('dashboard'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z')
            span.menu-text(data-i18n="dashboard") Dashboard
        li
          a.sidebar-link(href='#ride-requests' onclick="showSection('ride-requests'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M5 11h14l1.5 4h-17L5 11zm3-6h8l1 3H7l1-3zM6 18c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1zm10 0c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1z')
            span.menu-text(data-i18n="ride_requests") Ride Requests
            span.notification-badge#pendingRequestsBadge 0
        li
          a.sidebar-link(href='#trip-history' onclick="showSection('trip-history'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M13 3a9 9 0 1 0 9 9h-2a7 7 0 1 1-7-7V3zM12 8v6l4 2 1-1.73-3-1.27V8h-2z')
            span.menu-text(data-i18n="trip_history") Trip History
        li
          a.sidebar-link(href='#incident-report' onclick="showSection('incident-report'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z')
            span.menu-text(data-i18n="incident_report") Incident Report
        li
          a.sidebar-link(href='#safety-center' onclick="showSection('safety-center'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z')
            span.menu-text(data-i18n="safety_center") Safety Center
        li
          a.sidebar-link(href='#financial-hub' onclick="showSection('financial-hub'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91 2.58.6 3.97 1.47 3.97 3.62 0 1.9-1.33 3.1-3.15 3.42z')
            span.menu-text(data-i18n="financial_hub") Financial Hub
        li
          a.sidebar-link(href='#professional-growth' onclick="showSection('professional-growth'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z')
            span.menu-text(data-i18n="professional_growth") Professional Growth
        li
          a.sidebar-link(href='#community' onclick="showSection('community'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z')
            span.menu-text(data-i18n="community") Community
        li
          a.sidebar-link(href='#live-map' onclick="showSection('live-map'); closeMobileMenu();")
            span.icon
              svg(viewbox='0 0 24 24' width='20' height='20' fill='currentColor')
                path(d='M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z')
            span.menu-text(data-i18n="live_map") Live Map

    // Main Content
    main.main-content
      // Dashboard Section
      section#dashboard.section.active
        .dashboard-header
          h1(data-i18n="driver_dashboard") Driver Dashboard
          p(data-i18n="dashboard_subtitle") Manage your rides, earnings, and safety features

        // Safety Tip
        .safety-tip
          h3(data-i18n="safety_tip") Safety Tip of the Day
          p#safetyTipContent(data-i18n="safety_tip_content") Always verify passenger details before starting a trip. Use in-app navigation for accurate routes and share trip status with trusted contacts.

        // Voice SOS Button
        .voice-sos-container
          button.btn.btn-sos-large#voiceSOSBtn(onclick="startVoiceRecording()")
            span.icon
              svg(viewbox='0 0 24 24' width='24' height='24' fill='currentColor')
                path(d='M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z')
            span#voiceSOSLabel(data-i18n="click_to_record_sos") Click to Record SOS Message

        // Stats Cards
        .stats-grid
          .stat-card
            .stat-icon.earnings
              svg(viewbox='0 0 24 24' width='30' height='30' fill='white')
                path(d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91 2.58.6 3.97 1.47 3.97 3.62 0 1.9-1.33 3.1-3.15 3.42z')
            .stat-details
              h3(data-i18n="today_earnings") Today's Earnings
              .value#todayEarnings UGX 0
          .stat-card
            .stat-icon.rides
              svg(viewbox='0 0 24 24' width='30' height='30' fill='white')
                path(d='M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3H9v2H6.5c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z')
            .stat-details
              h3(data-i18n="today_rides") Today's Rides
              .value#todayRides 0
          .stat-card
            .stat-icon.pending
              svg(viewbox='0 0 24 24' width='30' height='30' fill='white')
                path(d='M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z')
            .stat-details
              h3(data-i18n="pending_requests") Pending Requests
              .value#pendingRequests 0
          .stat-card
            .stat-icon.rating
              svg(viewbox='0 0 24 24' width='30' height='30' fill='white')
                path(d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z')
            .stat-details
              h3(data-i18n="performance_rating") Performance Rating
              .value#performanceRating 0.0
          .stat-card
            .stat-icon.trust
              svg(viewbox='0 0 24 24' width='30' height='30' fill='white')
                path(d='M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z')
            .stat-details
              h3(data-i18n="trust_score") Trust Score
              .value#trustScore 0%

        // Activity and Performance Section
        .activity-graph-container
          .card.graph-card
            h2(data-i18n="earnings_overview") Earnings Overview (Last 7 Days)
            canvas#earningsChart(width='400' height='250')
          
          .card.performance-card
            h2(data-i18n="performance_metrics") Performance Metrics
            .metrics-grid
              .metric
                span.metric-label(data-i18n="acceptance_rate") Acceptance Rate
                .metric-value#acceptanceRate 0%
                .metric-progress
                  .progress(style='width: 0%')
              .metric
                span.metric-label(data-i18n="completion_rate") Completion Rate
                .metric-value#completionRate 0%
                .metric-progress
                  .progress(style='width: 0%')
              .metric
                span.metric-label(data-i18n="customer_rating") Customer Rating
                .metric-value#customerRating 0.0
                .metric-progress
                  .progress(style='width: 0%')
              .metric
                span.metric-label(data-i18n="safety_score") Safety Score
                .metric-value#safetyScore 0%
                .metric-progress
                  .progress(style='width: 0%')

        // Quick Actions and Recent Activity
        .quick-actions-container
          .card.quick-actions-card
            h2(data-i18n="quick_actions") Quick Actions
            .action-buttons
              button.btn.btn-primary(onclick="showSection('ride-requests')" data-i18n="view_ride_requests") View Ride Requests
              button.btn.btn-secondary(onclick="refreshDashboard()" data-i18n="refresh_dashboard") Refresh Dashboard
              button.btn.btn-sos(onclick="showSection('incident-report')" data-i18n="report_incident") Report Incident
              button.btn.btn-safety(onclick="toggleSafetyMode()" data-i18n="toggle_safety_mode") Toggle Safety Mode
              button.btn.btn-map(onclick="showSection('live-map')" data-i18n="view_live_map") View Live Map
          
          .card.recent-activity
            h2(data-i18n="recent_activity") Recent Activity
            .activity-list#recentActivityList
              .activity-item
                .activity-icon.info
                  svg(viewbox='0 0 24 24' width='16' height='16' fill='currentColor')
                    path(d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z')
                .activity-details
                  span.activity-text(data-i18n="welcome_activity") Welcome to SafeMove! Start accepting rides to see your activity here.
                  span.activity-time Just now

      // Live Map Section
      section#live-map.section
        .section-header
          h1(data-i18n="live_map") Live Map
          p.section-subtitle(data-i18n="map_subtitle") View your current location, nearby passengers, and popular pickup spots
        .map-container
          .card.map-card
            #driverMap
          .map-controls
            button.btn.btn-primary(onclick="centerMapOnUser()" data-i18n="center_map") Center on My Location
            button.btn.btn-secondary(onclick="findHotspots()" data-i18n="find_hotspots") Find Hotspots
            button.btn.btn-safety(onclick="toggleSafetyZones()" data-i18n="safety_zones") Safety Zones
        .map-stats
          .stat-card
            h3(data-i18n="nearby_passengers") Nearby Passengers
            .value#nearbyPassengers 0
          .stat-card
            h3(data-i18n="hotspot_areas") Hotspot Areas
            .value#hotspotAreas 0
          .stat-card
            h3(data-i18n="safe_zones") Safe Zones
            .value#safeZones 0

      // Ride Requests Section
      section#ride-requests.section
        .section-header
          h1(data-i18n="ride_requests") Ride Requests
          p.section-subtitle(data-i18n="ride_requests_subtitle") Accept or decline ride requests from passengers
        .passenger-verification-notice
          p 
            strong(data-i18n="verified_passenger") Verified Passenger: 
            span#verifiedPassengerInfo(data-i18n="check_verification") Check passenger verification status before accepting
        .table-actions
          button.btn.btn-secondary(onclick='loadRideRequests()' data-i18n="refresh_requests") Refresh Requests
          button.btn.btn-primary(onclick="goOnline()" data-i18n="go_online") Go Online
          button.btn.btn-safety(onclick="goOffline()" data-i18n="go_offline") Go Offline
        .ride-table-container
          table.ride-table
            thead
              tr
                th(data-i18n="passenger") Passenger
                th(data-i18n="verification") Verification
                th(data-i18n="pickup") Pickup
                th(data-i18n="destination") Destination
                th(data-i18n="distance") Distance
                th(data-i18n="fare") Fare
                th(data-i18n="requested") Requested
                th(data-i18n="actions") Actions
            tbody#rideRequestsBody
              tr
                td(colspan='8' style='text-align: center;' data-i18n="loading_requests") Loading ride requests...

      // Trip History Section
      section#trip-history.section
        .section-header
          h1(data-i18n="trip_history") Trip History
          p.section-subtitle(data-i18n="trip_history_subtitle") View your completed rides and earnings
        .table-actions
          button.btn.btn-secondary(onclick='loadTripHistory()' data-i18n="refresh_history") Refresh History
          select#timeFilter(onchange='filterTripHistory()')
            option(value='7' data-i18n="last_7_days") Last 7 Days
            option(value='30' data-i18n="last_30_days") Last 30 Days
            option(value='90' data-i18n="last_90_days") Last 90 Days
        .trip-table-container
          table.trip-table
            thead
              tr
                th(data-i18n="route") Route
                th(data-i18n="date_time") Date & Time
                th(data-i18n="passenger") Passenger
                th(data-i18n="distance") Distance
                th(data-i18n="fare") Fare
                th(data-i18n="rating") Rating
            tbody#tripHistoryBody
              tr
                td(colspan='6' style='text-align: center;' data-i18n="loading_history") Loading trip history...
        .trip-summary
          .summary-card
            h3(data-i18n="total_earnings") Total Earnings
            .value#totalEarnings UGX 0
          .summary-card
            h3(data-i18n="total_trips") Total Trips
            .value#totalTrips 0
          .summary-card
            h3(data-i18n="average_rating") Average Rating
            .value#averageRating 0.0

      // Incident Report Section
      section#incident-report.section
        .section-header
          h1(data-i18n="incident_report") Incident Report
          p.section-subtitle(data-i18n="incident_subtitle") Report any incidents or safety concerns during your trips
        .card
          h2(data-i18n="submit_incident") Submit Incident Report
          form#incidentForm
            .form-group
              label(data-i18n="incident_type") Incident Type
              select#incidentType.form-control(name='incidentType' required)
                option(value='' data-i18n="select_incident_type") Select incident type...
                option(value='traffic_accident' data-i18n="traffic_accident") Traffic Accident
                option(value='theft' data-i18n="theft") Theft
                option(value='passenger_harassment' data-i18n="passenger_harassment") Passenger Harassment
                option(value='safety_concern' data-i18n="safety_concern") Safety Concern
                option(value='vehicle_issue' data-i18n="vehicle_issue") Vehicle Issue
                option(value='technical_issue' data-i18n="technical_issue") App/Technical Issue
                option(value='other' data-i18n="other") Other
            .form-group
              label(data-i18n="description") Description
              textarea#incidentDescription.form-control(name='description' data-i18n="description_placeholder" placeholder='Please describe what happened in detail...' required)
            .form-group
              label(data-i18n="location") Location (Optional)
              input#incidentLocation.form-control(type='text' name='location' data-i18n="location_placeholder" placeholder='Enter location where incident occurred')
            .form-group
              label(data-i18n="related_ride") Related Ride (Optional)
              select#relatedRide.form-control(name='rideId')
                option(value='' data-i18n="select_related_ride") Select related ride...
            .form-group
              label(data-i18n="emergency_video") Emergency Video Recording
              .video-recording-option
                button.btn.btn-secondary(type='button' onclick="startVideoRecording()" data-i18n="record_video") Record Emergency Video
                small(data-i18n="video_note") This will record a video clip to attach to your report
                video#videoPreview(style='display: none; width: 100%; margin-top: 10px;' controls)
            .form-group
              label(data-i18n="voice_note") Voice Note (Optional)
              .voice-recording-option
                button.btn.btn-secondary(type='button' onclick="startVoiceNoteRecording()" data-i18n="record_voice_note") Record Voice Note
                audio#audioPreview(style='display: none; width: 100%; margin-top: 10px;' controls)
            .form-actions
              button.btn.btn-primary(type='submit' data-i18n="submit_report") Submit Incident Report
              button.btn.btn-secondary(type='button' onclick="showSection('dashboard')" data-i18n="cancel") Cancel
          p.emergency-contact
            span(data-i18n="emergency_contact") Emergency? Call support: 
            strong 125-SAFEMOVE
            |  or 
            span(data-i18n="use_voice_sos") use Voice SOS

      // Safety Center Section
      section#safety-center.section
        .section-header
          h1(data-i18n="safety_center") Safety Center
          p.section-subtitle(data-i18n="safety_center_subtitle") Your safety is our priority. Access emergency features and safety tools.
        .safety-overview
          .safety-score-card
            h3(data-i18n="safety_score") Safety Score
            .score-circle
              .score-value#safetyScoreValue 0%
            p(data-i18n="safety_tips") Follow safety guidelines to improve your score
          .emergency-contacts
            h3(data-i18n="emergency_contacts") Emergency Contacts
            .contact-list
              .contact
                span.contact-name(data-i18n="police") Police
                span.contact-number 999
              .contact
                span.contact-name(data-i18n="ambulance") Ambulance
                span.contact-number 911
              .contact
                span.contact-name(data-i18n="safemove_support") SafeMove Support
                span.contact-number 125-SAFEMOVE
        
        .safety-features-grid
          .safety-feature-card
            h3(data-i18n="smart_safety_mode") Smart Safety Mode
            p(data-i18n="safety_mode_desc") Automatically activates in risky zones or at night
            .toggle-container
              label.switch
                input#smartSafetyMode(type='checkbox' onchange="toggleSmartSafetyMode(this.checked)")
                span.slider
              span.status#safetyModeStatusText(data-i18n="inactive") Inactive
          .safety-feature-card
            h3(data-i18n="voice_sos") Voice-Activated SOS
            p(data-i18n="voice_sos_desc") Say "SafeMove Help" to trigger emergency
            button.btn.btn-sos-test(onclick="testVoiceCommand()" data-i18n="test_voice") Test Voice Command
          .safety-feature-card
            h3(data-i18n="emergency_video") Emergency Video Snap
            p(data-i18n="video_snap_desc") Records 10-second clip during emergencies
            button.btn.btn-secondary(onclick="testVideoRecording()" data-i18n="test_video") Test Video Recording
          .safety-feature-card
            h3(data-i18n="driver_health") Driver Health Monitor
            p(data-i18n="health_monitor_desc") Track fatigue and wellness
            .health-input
              select#fatigueLevel
                option(value='' data-i18n="select_fatigue") Select fatigue level
                option(value='1' data-i18n="feeling_fresh") Feeling Fresh
                option(value='2' data-i18n="slightly_tired") Slightly Tired
                option(value='3' data-i18n="moderately_fatigued") Moderately Fatigued
                option(value='4' data-i18n="very_tired") Very Tired
                option(value='5' data-i18n="extremely_fatigued") Extremely Fatigued
              button.btn.btn-primary(onclick="logFatigue()" data-i18n="log_status") Log Status

        .safety-tips-section
          h3(data-i18n="safety_guidelines") Safety Guidelines
          .tips-grid
            .tip-card
              h4(data-i18n="verify_passenger") Verify Passenger
              p(data-i18n="verify_passenger_tip") Always check passenger details and rating before starting trip
            .tip-card
              h4(data-i18n="share_location") Share Location
              p(data-i18n="share_location_tip") Share your live location with trusted contacts during trips
            .tip-card
              h4(data-i18n="emergency_protocol") Emergency Protocol
              p(data-i18n="emergency_protocol_tip") Know how to use SOS features and emergency contacts
            .tip-card
              h4(data-i18n="vehicle_safety") Vehicle Safety
              p(data-i18n="vehicle_safety_tip") Regular vehicle maintenance and safety checks are essential

      // Financial Hub Section
      section#financial-hub.section
        .section-header
          h1(data-i18n="financial_hub") Financial Hub
          p.section-subtitle(data-i18n="financial_subtitle") Track your earnings, set goals, and redeem rewards
        .financial-overview
          .financial-summary
            h3(data-i18n="financial_summary") Financial Summary
            .summary-cards
              .summary-card
                span.label(data-i18n="weekly_earnings") Weekly Earnings
                span.value#weeklyEarnings UGX 0
              .summary-card
                span.label(data-i18n="monthly_earnings") Monthly Earnings
                span.value#monthlyEarnings UGX 0
              .summary-card
                span.label(data-i18n="total_earnings") Total Earnings
                span.value#totalEarningsAmount UGX 0
        
        .financial-grid
          .financial-card
            h3(data-i18n="smart_wallet") Smart Wallet Analytics
            .wallet-stats
              .stat
                span.label(data-i18n="weekly_earnings") Weekly Earnings
                span.value#weeklyEarningsChart UGX 0
              .stat
                span.label(data-i18n="spending_trend") Spending Trend
                span.value#spendingTrend 0%
              .stat
                span.label(data-i18n="performance_score") Performance Score
                span.value#performanceScore 0/100
            button.btn.btn-primary(onclick="showWalletAnalytics()" data-i18n="view_analytics") View Detailed Analytics
          .financial-card
            h3(data-i18n="savings_goals") Savings & Goals
            .goals-container
              .goal-item
                span.goal-name(data-i18n="new_helmet") New Helmet
                span.goal-amount UGX 150,000
                .goal-progress
                  .progress-bar
                    .progress(style='width: 0%')
                span.goal-percent 0%
            button.btn.btn-secondary(onclick="showGoalsManager()" data-i18n="add_goal") Add New Goal
          .financial-card
            h3(data-i18n="safemove_rewards") SafeMove Rewards
            .rewards-points
              span.points-label(data-i18n="your_points") Your Points
              span.points-value#rewardPoints 0
            .rewards-actions
              button.btn.btn-primary(onclick="redeemRewards()" data-i18n="redeem_fuel") Redeem Fuel Discount
              button.btn.btn-secondary(onclick="showAllRewards()" data-i18n="view_rewards") View All Rewards
        
        .earnings-breakdown
          h3(data-i18n="earnings_breakdown") Earnings Breakdown
          .breakdown-chart
            canvas#earningsBreakdownChart(width='400' height='200')

      // Professional Growth Section
      section#professional-growth.section
        .section-header
          h1(data-i18n="professional_growth") Professional Growth
          p.section-subtitle(data-i18n="professional_subtitle") Enhance your skills and build your professional profile
        .professional-overview
          .profile-summary
            h3(data-i18n="driver_profile") Driver Profile
            .profile-stats
              .stat
                span.label(data-i18n="total_trips") Total Trips
                span.value#totalTripsCount 0
              .stat
                span.label(data-i18n="experience") Experience
                span.value#experienceLevel(data-i18n="beginner") Beginner
              .stat
                span.label(data-i18n="completion_rate") Completion Rate
                span.value#completionRateValue 0%
        
        .professional-grid
          .profile-card
            h3(data-i18n="digital_profile") Digital Driver Profile
            .profile-badges
              .badge.trust-badge(data-i18n="trusted_driver") Trusted Driver
              .badge.safety-badge(data-i18n="safety_expert") Safety Expert
              .badge.rating-badge 0.0⭐
            .profile-actions
              button.btn.btn-primary(onclick="viewFullProfile()" data-i18n="view_profile") View Full Profile
              button.btn.btn-secondary(onclick="shareProfile()" data-i18n="share_profile") Share Profile
          .training-card
            h3(data-i18n="training_center") Safety Training Center
            .training-modules
              .module.completed
                span.module-name(data-i18n="traffic_laws") Traffic Laws Update
                span.module-status(data-i18n="completed") Completed
              .module.in-progress
                span.module-name(data-i18n="customer_care") Customer Care
                span.module-status(data-i18n="in_progress") In Progress
              .module.available
                span.module-name(data-i18n="emergency_response") Emergency Response
                span.module-status(data-i18n="available") Available
            button.btn.btn-primary(onclick="startTraining()" data-i18n="start_training") Start Training
          .transparency-card
            h3(data-i18n="transparency_log") Incident Transparency Log
            .incident-log
              .log-item
                span.log-date --
                span.log-type(data-i18n="no_incidents") No incidents reported
                span.log-status --
            button.btn.btn-secondary(onclick="viewFullLog()" data-i18n="view_full_log") View Full Log

      // Community Section
      section#community.section
        .section-header
          h1(data-i18n="driver_community") Driver Community
          p.section-subtitle(data-i18n="community_subtitle") Connect with other drivers, share experiences, and get support
        .community-overview
          .community-stats
            .stat-card
              h3(data-i18n="active_drivers") Active Drivers
              .value#activeDriversCount 0
            .stat-card
              h3(data-i18n="community_rating") Community Rating
              .value#communityRating 0.0
            .stat-card
              h3(data-i18n="safety_incidents") Safety Incidents
              .value#safetyIncidentsCount 0
        
        .community-grid
          .forum-card
            h3(data-i18n="community_forum") Community Forum
            .forum-preview
              .forum-post
                span.post-title(data-i18n="welcome_forum") Welcome to SafeMove Community
                span.post-preview(data-i18n="forum_welcome_message") Connect with fellow drivers and share your experiences...
                span.post-meta 0 comments • Just now
            .forum-actions
              button.btn.btn-primary(onclick="enterForum()" data-i18n="enter_forum") Enter Forum
              button.btn.btn-secondary(onclick="createPost()" data-i18n="create_post") Create Post
          .recognition-card
            h3(data-i18n="driver_month") Driver of the Month
            .driver-spotlight
              .driver-photo-placeholder
                span DP
              .driver-info
                span.driver-name(data-i18n="no_driver_selected") Not selected yet
                span.driver-achievements(data-i18n="check_back_later") Check back later this month
                span.driver-rating 0.0⭐
            .recognition-actions
              button.btn.btn-primary(onclick="viewSpotlight()" data-i18n="view_spotlight") View Spotlight
              button.btn.btn-secondary(onclick="nominateDriver()" data-i18n="nominate_driver") Nominate Driver
          .wellness-card
            h3(data-i18n="mental_wellness") Mental Wellness Support
            .wellness-resources
              p(data-i18n="wellness_desc") Stress management and counseling available for all drivers
              .wellness-features
                .feature
                  span.feature-icon 🧘
                  span.feature-text(data-i18n="stress_management") Stress Management
                .feature
                  span.feature-icon 🗣️
                  span.feature-text(data-i18n="counseling") Professional Counseling
              .wellness-actions
                button.btn.btn-primary(onclick="contactCounselor()" data-i18n="contact_counselor") Contact Counselor
                button.btn.btn-secondary(onclick="showWellnessTips()" data-i18n="wellness_tips") Wellness Tips

    // Messages Container
    #messageContainer

    // Real-time Support Chat
    .support-chat
      button.chat-toggle-btn(onclick="toggleSupportChat()") 💬 
        span(data-i18n="support") Support
      .chat-container#supportChatContainer
        .chat-header
          h4(data-i18n="safemove_support") SafeMove Support
          button.chat-close(onclick="toggleSupportChat()") ×
        .chat-messages#supportChatMessages
          .message.support
            p(data-i18n="support_welcome") Hello! How can we help you today?
        .chat-input
          input#supportMessageInput(type='text' data-i18n="type_message" placeholder='Type your message...')
          button(onclick="sendSupportMessage()" data-i18n="send") Send

    // Voice Recording Modal
    .modal#voiceModal
      .modal-content
        .modal-header
          h2(data-i18n="recording_voice") Recording Voice Message
          button.modal-close(onclick="stopVoiceRecording()") ×
        .modal-body
          .recording-indicator
            .pulse-animation
            p(data-i18n="speak_now") Speak now...
          .recording-timer
            span#recordingTimer 0s
          .recording-controls
            button.btn.btn-sos(onclick="stopVoiceRecording()" data-i18n="stop_recording") Stop Recording
        .modal-footer
          p.recording-note(data-i18n="recording_note") This recording will be sent to emergency contacts if SOS is activated

    // Video Recording Modal
    .modal#videoModal
      .modal-content
        .modal-header
          h2(data-i18n="recording_video") Recording Video
          button.modal-close(onclick="stopVideoRecording()") ×
        .modal-body
          video#videoLivePreview(autoplay muted style='width: 100%; max-height: 400px;')
          .recording-timer
            span#videoRecordingTimer 0s
          .recording-controls
            button.btn.btn-sos(onclick="stopVideoRecording()" data-i18n="stop_recording") Stop Recording
        .modal-footer
          p.recording-note(data-i18n="video_recording_note") This video will be attached to your incident report

    script(src='/js/driver.js')